<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
    <title>网址列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="./css/font.css">
    <link rel="stylesheet" href="./css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="./lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="./js/xadmin.js"></script>

</head>
<body>

<table class="layui-hide" id="test" lay-filter="test"></table>


<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>



<script>
layui.use('table', function(){
  var table = layui.table;

  table.render({
          elem: '#test'
          ,url:'http://localhost:5000/select_all'
          ,dataType: "json"
          ,title: '用户数据表'
          ,cols: [[
              {type: 'checkbox', fixed: 'left'}
             ,{field:'web_name', title:'网站名称',  edit: 'text'}
             ,{field:'web_url', title:'网址',  edit: 'text'}
             ,{field:'add_time', title:'添加时间',  edit: 'text'}
             ,{field:'state', title:'状态',  edit: 'text' ,templet: function(res){
                    return '<span class="layui-btn layui-btn-normal layui-btn-mini">'+ res.email +'</span>'}}
             ,{fixed: 'right',title:'操作', toolbar: '#barDemo'}]]
          ,page: true
        });

  //监听行工具事件
  table.on('tool(test)', function(obj){
    var data = obj.data;
    //console.log(obj)
    if(obj.event === 'del'){
      layer.confirm('真的删除行么', function(index){
        obj.del();
        layer.close(index);
      });
    } else if(obj.event === 'edit'){
      layer.prompt({
        formType: 2
        ,value: data.email
      }, function(value, index){
        obj.update({
          email: value
        });
        layer.close(index);
      });
    }
  });
});
</script>

</body>
</html>